
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debugging &#8212; Skein 0.8.0+7.g882683d documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Docs" href="api.html" />
    <link rel="prev" title="Jupyter Notebook Server" href="recipes-jupyter-notebook.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="debugging">
<h1>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h1>
<p>Debugging YARN applications can be tricky, as you often don’t have access to
the remote nodes to debug failures. This page provides several tips for what to
do when you encounter failures.</p>
<div class="section" id="accessing-the-skein-web-ui">
<h2>Accessing the Skein Web UI<a class="headerlink" href="#accessing-the-skein-web-ui" title="Permalink to this headline">¶</a></h2>
<p>For running applications, the Skein <a class="reference external" href="web-ui.html">Web UI</a> can provide useful
information including:</p>
<ul class="simple">
<li><p>What services are currently running in the application</p></li>
<li><p>Status of all current and past containers</p></li>
<li><p>Live links to logs for each service (these are especially useful)</p></li>
<li><p>Key-value pairs in the <a class="reference external" href="key-value-store.html">Key-Value Store</a></p></li>
</ul>
<p>For more information, see the <a class="reference external" href="web-ui.html">Web UI docs</a>.</p>
</div>
<div class="section" id="accessing-the-application-logs">
<h2>Accessing the Application Logs<a class="headerlink" href="#accessing-the-application-logs" title="Permalink to this headline">¶</a></h2>
<p>When an application finishes, its logs are (usually) aggregated and made
available. They can be accessed using the <code class="docutils literal notranslate"><span class="pre">yarn</span> <span class="pre">logs</span></code> cli command.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> yarn logs -applicationId &lt;Application ID&gt;
</pre></div>
</div>
<p>The logs contain the <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> for each service, as well as the
application master. This is a good first place to look when encountering an
unexpected failure or bug.</p>
</div>
<div class="section" id="configuring-logging-in-the-application-master">
<h2>Configuring Logging in the Application Master<a class="headerlink" href="#configuring-logging-in-the-application-master" title="Permalink to this headline">¶</a></h2>
<p>Skein’s <a class="reference external" href="https://hadoop.apache.org/docs/stable/hadoop-yarn/hadoop-yarn-site/YARN.html">Application Master</a>
uses <a class="reference external" href="http://logging.apache.org/log4j/1.2/">Log4j</a> for logging.
When debugging issues in
Skein itself, it can be useful to increase the log level to provide more
information. This can be accomplished two different ways:</p>
<ul class="simple">
<li><p>Change the logging level with the <code class="docutils literal notranslate"><span class="pre">log_level</span></code> field (<code class="docutils literal notranslate"><span class="pre">debug</span></code> is a good option).</p></li>
<li><p>Override the defaul log configuration by specifying a custom
<code class="docutils literal notranslate"><span class="pre">log4j.properties</span></code> file in the <a class="reference external" href="specification.html">specification</a>. This
allows you to increase the logging level for component libraries as well. See
the <a class="reference external" href="https://logging.apache.org/log4j/1.2/">Log4j documentation</a> for more
information on configuration files.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>master:
  # Change the log level to debug
  log_level: debug
  # OR provide a custom log configuration file
  log_config: path/to/my/log4j.properties
</pre></div>
</div>
</div>
<div class="section" id="configuring-logging-in-the-client-driver">
<h2>Configuring Logging in the Client Driver<a class="headerlink" href="#configuring-logging-in-the-client-driver" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="api.html#skein.Client" title="skein.Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">skein.Client</span></code></a> uses a Java driver process to communicate with
services like YARN and HDFS. If you find issues in communicating with these
services (submitting, querying, or killing applications), it may be useful to
increase logging verbosity for the skein driver process (<code class="docutils literal notranslate"><span class="pre">debug</span></code> is a good
option). There are a few ways to do this:</p>
<ul class="simple">
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">log_level</span></code> keyword when creating a <a class="reference internal" href="api.html#skein.Client" title="skein.Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">skein.Client</span></code></a>.</p></li>
<li><p>Setting the <code class="docutils literal notranslate"><span class="pre">SKEIN_LOG_LEVEL</span></code> environment variable (e.g.
<code class="docutils literal notranslate"><span class="pre">SKEIN_LOG_LEVEL=DEBUG</span></code>).</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">--log-level</span></code> flag when starting a persistent driver using the
<a class="reference external" href="cli.html">CLI</a> (e.g.  <code class="docutils literal notranslate"><span class="pre">skein</span> <span class="pre">driver</span> <span class="pre">start</span> <span class="pre">--log-level</span> <span class="pre">debug</span></code>).</p></li>
</ul>
<p>Additionally, you may want to log to a file instead of to the terminal. There
are also a few ways to do this:</p>
<ul class="simple">
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">log</span></code> keyword when creating a <a class="reference internal" href="api.html#skein.Client" title="skein.Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">skein.Client</span></code></a>.</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">--log</span></code> flag when starting a persistent driver using the <a class="reference external" href="cli.html">CLI</a>.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a client, logging to `driver.log` with &quot;debug&quot; log level</span>
<span class="kn">import</span> <span class="nn">skein</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">skein</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">log_level</span><span class="o">=</span><span class="s1">&#39;debug&#39;</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="s1">&#39;driver.log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">A tool and library for easily deploying applications on Apache YARN</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=jcrist&repo=skein&type=watch&count=False&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/jcrist/skein">
    <img
        alt="https://secure.travis-ci.org/jcrist/skein.svg?branch=master"
        src="https://secure.travis-ci.org/jcrist/skein.svg?branch=master"
    />
</a>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="specification.html">Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributing-files.html">Distributing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="key-value-store.html">Key-Value Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="web-ui.html">Web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#accessing-the-skein-web-ui">Accessing the Skein Web UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-the-application-logs">Accessing the Application Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-logging-in-the-application-master">Configuring Logging in the Application Master</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-logging-in-the-client-driver">Configuring Logging in the Client Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="develop.html">Development</a></li>
</ul>

<h3>Need help?</h3>

<p>
  Open an issue in the <a href="https://github.com/jcrist/skein/issues">issue tracker</a>.
</p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Jim Crist-Harif.
      
      |
      <a href="_sources/debugging.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>